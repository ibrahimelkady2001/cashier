<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Cashier.InventoryPage" 
          BackgroundColor="#f5f5f5" 
              xmlns:appMaker="clr-namespace:Cashier"
             Title="المخزن">

    <StackLayout>
        <Button Text ="Back" TextColor ="Black" HorizontalOptions="Start" Clicked="Back_Clicked" />
        <StackLayout Orientation="Horizontal">


        <SearchBar TextChanged="searchbar_TextChanged" BackgroundColor="White" TextColor="Black" x:Name="searchbar" HorizontalOptions="FillAndExpand"></SearchBar>
             <Picker SelectedIndexChanged="orderpicker_SelectedIndexChanged" HorizontalTextAlignment="Center" WidthRequest="200" x:Name="orderpicker">
               
                </Picker> 
                </StackLayout>
                <StackLayout Orientation="Horizontal">
                <Label VerticalTextAlignment="Center" VerticalOptions="Center" TextColor ="Black" FontSize="20" Text="فلتر حسب النوع :"></Label>
                       <Picker VerticalOptions="Center" VerticalTextAlignment="Center" SelectedIndexChanged="catgoryPicker_SelectedIndexChanged" HorizontalTextAlignment="Center" WidthRequest="200" x:Name="catgoryPicker"/>
               </StackLayout>
        
        <!-- ListView for Products -->
        <ListView Grid.Row="0"  
                  x:Name="ProductsListView"  IsPullToRefreshEnabled="True"
                  HasUnevenRows="True"  ItemTapped="ProductsListView_ItemTapped" CachingStrategy="RecycleElementAndDataTemplate"
                  SeparatorVisibility="None" 
                  Margin="10">
            <ListView.ItemTemplate>
                <DataTemplate x:DataType="appMaker:Product">
                    <ViewCell>
                        <Border StrokeShape="RoundRectangle 10" 
                                StrokeThickness="1" 
                                Stroke="#ccc" 
                                BackgroundColor="White" 
                                Padding="15" 
                                Margin="5">
                            <Grid ColumnDefinitions="*, *, *, *, *,*">
                                <!-- Product Name -->
                                <Label Grid.Column="0" 
                                       Text="{Binding ProudctName}" 
                                       FontSize="16" 
                                       FontAttributes="Bold" 
                                       TextColor="#333" 
                                       VerticalOptions="Center" />

                                <!-- Product ID -->
                                <Label Grid.Column="1" 
                                       Text="{Binding  ProudctId}" 
                                       FontSize="14" 
                                       TextColor="#666" 
                                       VerticalOptions="Center" 
                                       HorizontalTextAlignment="Center" />

                                <!-- Price -->
                                <Label Grid.Column="2" 
                                       Text="{Binding ProudctPrice, StringFormat='جنية {0}'}" 
                                       FontSize="14" 
                                       TextColor="#2196f3" 
                                       VerticalOptions="Center" 
                                       HorizontalTextAlignment="Center" />

                                <!-- Quantity -->
                                <Label Grid.Column="3" 
                                       Text="{Binding Quantity, StringFormat='{0} قطعة'}" 
                                       FontSize="14" 
                                       TextColor="#4caf50" 
                                       VerticalOptions="Center" 
                                       HorizontalTextAlignment="Center" />

                                <!-- Supplier Name -->
                                <Label Grid.Column="4" 
                                       Text="{Binding  SupplierName}" 
                                       FontSize="14" 
                                       TextColor="#ff9800" 
                                       VerticalOptions="Center" 
                                       HorizontalTextAlignment="End" />
                                                         <Label Grid.Column="4" 
                                       Text="{Binding  ProudctCategory}" 
                                       FontSize="14" 
                                       TextColor="#ff9800" 
                                       VerticalOptions="Center" 
                                       HorizontalTextAlignment="End" />
                            </Grid>
                        </Border>
                    </ViewCell>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>

        <!-- Add Product Button -->
        <Border Grid.Row="1" 
                StrokeShape="RoundRectangle 25" 
                StrokeThickness="1" 
                Stroke="#fff" 
                BackgroundColor="#4caf50" 
                Padding="15" 
                HorizontalOptions="Center" 
                VerticalOptions="End" 
                Margin="20">
            <Button Text="إضافة منتج" 
                    FontSize="18" 
                    TextColor="White" 
                    BackgroundColor="#4caf50" 
                    BorderColor="#4caf50" 
                    CornerRadius="25" 
                    WidthRequest="200" 
                    HeightRequest="50" 
                    Clicked="AddProduct_Clicked" />
        </Border>
    </StackLayout>
</ContentPage>